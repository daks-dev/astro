---
// import type { HTMLAttributes } from 'astro/types';
import twMerge from '../../tailwind/tailwind-merge';
import Icon from '../icon/Icon.astro';
import Link from './Link.astro';
import type { IconsKeys } from '../icon';
import type { NavItem } from '.';

type Props = NavItem & {
  icon?:
    | IconsKeys
    | {
        home: IconsKeys;
        page: IconsKeys;
      };
};

const {
  icon = {
    home: 'house-simple-duotone',
    page: 'house-duotone'
  },
  class: className,
  label,
  ...props
} = Astro.props;

/*
const icon =
  typeof i === 'string'
    ? {
        home: i,
        page: i
      }
    : i;
    */
---

<Link
  rel='prefetch'
  class={twMerge('group flex items-center gap-x-4 h-7', className)}
  href='/'
  label={label ?? 'home page'}
  {...props}>
  <slot name='before'>
    {
      typeof icon === 'string' ? (
        <Icon
          {icon}
          class='disabled h-full w-auto'
        />
      ) : (
        <>
          <Icon
            icon={icon.home}
            class={['disabled h-full w-auto', 'hidden group-[[aria-current="page"]]:block']}
          />
          <Icon
            icon={icon.page}
            class={['disabled h-full w-auto', 'group-[[aria-current="page"]]:hidden']}
          />
        </>
      )
    }
  </slot>
  <slot>
    {
      label && (
        <span
          class='whitespace-nowrap text-base uppercase tracking-widest'
          set:html={label}
        />
      )
    }
  </slot>
  <slot name='after' />
</Link>
