---
import Dropdown from '../dropdown/Dropdown.astro';
import Link from '../navigate/Link.astro';
import type { NavItem } from '../navigate';

type Props = {
  item: NavItem;
  class?: ClassName;
  custom?: Record<string, ClassName>;
  duration?: number;
};

const { item, class: className, custom = {}, duration = 300 } = Astro.props;

custom.drop = [
  'text-[95%] indent-2 bp:mt-1 bp:p-2 bp:text-[80%] bp:leading-loose bp:indent-0',
  custom.drop
];
---

<Dropdown
  toggle={item}
  role='menuitem'
  class={className}
  {custom}
  {duration}>
  <slot>
    {
      item.items?.map((item) => {
        const { class: className, role = 'menuitem', itemprop, ...link } = item;
        return (
          <Link
            {role}
            class={['flex items-center align-middle', custom.link, className]}
            {...link}
            itemprop={itemprop ?? link.href ? 'relatedLink' : undefined}
          />
        );
      })
    }
  </slot>
</Dropdown>
