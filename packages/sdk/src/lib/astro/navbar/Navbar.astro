---
import type { HTMLAttributes } from 'astro/types';
import twMerge from '../../tailwind/tailwind-merge';
import ColorTheme from '../color-theme/ColorTheme.astro';
import NavbarHome from '../navigate/NavHome.astro';
import NavToTop from '../navigate/NavToTop.astro';
import NavbarMenu from './NavbarMenu.astro';
import NavbarToggle from './NavbarToggle.astro';
import type { NavItem } from '../navigate';

type Props = Omit<HTMLAttributes<'div'>, 'class'> & {
  items: NavItem[];
  class?: ClassName;
  custom?: Record<string, ClassName>;
  brand?: string;
};

const { items, class: className, custom = {}, brand: label, ...props } = Astro.props;
---

<nav
  id='app-navbar'
  class={twMerge('fixed left-0 top-0 z-10 w-full', 'text-lg', className)}
  {...props}>
  <div class:list={['wrapper h-full', 'flex items-center justify-end']}>
    <slot name='before'>
      <NavbarHome
        role='menuitem'
        class={[custom.button, 'mr-auto', custom.home]}
        {label}
      />
    </slot>

    <NavbarMenu
      {custom}
      {items}>
      <slot />
    </NavbarMenu>

    <slot name='after'>
      <ColorTheme
        role='menuitem'
        class={[custom.button, 'ml-auto', custom.theme]}
      />
      <NavToTop
        role='menuitem'
        class={custom.totop}
      />
    </slot>
    <NavbarToggle class={[custom.button, 'order-last ml-8 lg:hidden', custom.toggle]} />
  </div>
</nav>
