---
import { ViewTransitions } from 'astro:transitions';
import { Navbar, Timer } from '../lib/astro';

interface Props {
  title: string;
}
const { title } = Astro.props;

const custom = {
  home: 'page:text-cyan-700 dark:page:text-cyan-500',
  menu: [
    '-lg:dark:bg-gray-700/95 -lg:bg-neutral-100/95',
    '-lg:rounded -lg:shadow-md'
    // 'first:rounded-t-md last:rounded-b-md'
  ],
  // theme: 'ml-4',
  totop: '-mr-2 lg:-mr-2.5 mt-8 rounded-full bg-slate-500/50 p-2',
  // toggle: 'ml-8',
  link: [
    'p-1 -lg:px-8 -lg:py-2',
    'text-slate-500 dark:text-slate-400',
    'page:text-cyan-700 dark:page:text-gray-200 step:underline',
    'lg:hover:text-sky-500',
    '-lg:hover:bg-neutral-400/95 -lg:dark:hover:bg-gray-500/95',
    '-lg:first:pt-3 -lg:last:pb-4'
  ],
  icon: ['text-slate-500 dark:text-slate-300']
};

const links = {
  '/about': 'About',
  '/blog': 'Blog'
};
---

<!doctype html>
<html lang='ru'>
  <head>
    <meta charset='UTF-8' />
    <meta
      name='viewport'
      content='width=device-width'
    />
    <title>{title}</title>
    <script is:inline>
      function set() {
        const t = localStorage.getItem('set::theme');
        const l = document.documentElement.classList;
        t?.includes('dark') ? l.add('dark') : t?.includes('light') && l.remove('dark');
      }
      set();
      document.addEventListener('astro:after-swap', set);
    </script>
    <link
      rel='icon'
      href='/favicon.svg'
      type='image/svg+xml'
    />
    <ViewTransitions />
  </head>

  <body
    class:list={[
      'relative flex min-h-screen flex-col',
      'text-gray-800 dark:text-neutral-200',
      'bg-neutral-100 bg-fixed bg-clip-content bg-center bg-no-repeat dark:bg-gray-800', // bg-[url(/astro.bg.svg)]
      '-lg:snap-start'
    ]}>
    <Navbar
      class={[
        'flex h-16 items-center',
        'text-1.5xl tracking-wide',
        'bg-neutral-100 shadow-md dark:bg-gray-800', // dark:bg-transparent
        'onscroll:bg-neutral-100/90 dark:onscroll:bg-slate-700/90',
        'shadow-md'
      ]}
      {custom}
      {links}
    />
    <main class='prose-xl prose-slate mb-8 pt-20'>
      <Timer class='mx-auto mb-4 block w-fit text-sm' />
      <slot />
    </main>
    <script>
      import '../lib/astro/glob';
    </script>
  </body>
</html>
